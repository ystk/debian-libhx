Index: libhx-3.5/src/string.c
===================================================================
--- libhx-3.5.orig/src/string.c	2010-08-25 22:44:30.000000000 +0200
+++ libhx-3.5/src/string.c	2010-08-25 22:44:40.000000000 +0200
@@ -153,7 +153,7 @@ EXPORT_SYMBOL char **HX_split(const char
 		}
 	}
 
-	if (max == 0)
+	if (max == 0 || *cp < max)
 		max = *cp;
 	else if (*cp > max)
 		*cp = max;
